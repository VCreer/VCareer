@startuml Leader Recruiter Dashboard - Simplified Sequence

title Leader Recruiter Performance Dashboard - Main Flow (Simplified)

skinparam backgroundColor #FFFFFF
skinparam roundcorner 10

actor "Leader Recruiter" as Leader
participant "Angular UI" as UI
participant "API Controller" as API
participant "Dashboard Service" as Service
database "Database" as DB

== View Company Dashboard ==

Leader -> UI : Access dashboard page
activate UI

UI -> API : GET /recruitment-dashboard/company\n(with filters: startDate, endDate)
activate API

API -> Service : GetCompanyDashboard(filter)
activate Service

' Check permission
Service -> Service : Check if user is Leader Recruiter

alt Not a Leader
    Service --> API : Error: "Access Denied"
    API --> UI : 403 Forbidden
    UI --> Leader : Show error message
    [<-- Leader
else Is Leader
    
    ' Get data
    Service -> DB : Get all staff in company
    activate DB
    DB --> Service : Staff list
    deactivate DB
    
    Service -> DB : Get activity logs\n(filtered by date)
    activate DB
    DB --> Service : Activity logs
    deactivate DB
    
    ' Calculate
    Service -> Service : Calculate performance\nfor each staff
    
    Service -> Service : Calculate company\ntotal statistics
    
    Service -> Service : Find top performers
    
    Service --> API : CompanyDashboardDto
    deactivate Service
    
    API --> UI : Dashboard data (JSON)
    deactivate API
    
    UI -> UI : Display:\n- Summary cards\n- Staff table\n- Top performers
    
    UI --> Leader : Show dashboard
    deactivate UI
    
end

|||

== View Staff Detail ==

Leader -> UI : Click on a staff
activate UI

UI -> API : GET /recruitment-dashboard/staff/{staffId}
activate API

API -> Service : GetStaffPerformance(staffId)
activate Service

Service -> DB : Get staff activities
activate DB
DB --> Service : Activities
deactivate DB

Service -> Service : Calculate metrics

Service --> API : StaffPerformanceDto
deactivate Service

API --> UI : Staff detail (JSON)
deactivate API

UI --> Leader : Show detailed metrics
deactivate UI

|||

== Compare Staff ==

Leader -> UI : Select multiple staff\n+ Click compare
activate UI

UI -> API : POST /recruitment-dashboard/compare\nBody: [staffId1, staffId2, ...]
activate API

API -> Service : CompareStaff(staffIds[])
activate Service

loop Each staff
    Service -> DB : Get activities
    activate DB
    DB --> Service : Activities
    deactivate DB
    
    Service -> Service : Calculate performance
end

Service --> API : StaffPerformanceDto[]
deactivate Service

API --> UI : Comparison data
deactivate API

UI --> Leader : Show side-by-side comparison
deactivate UI

|||

== Export Report ==

Leader -> UI : Click Export CSV
activate UI

UI -> UI : Generate CSV\nfrom current data

UI -> Leader : Download file
deactivate UI

note over Leader, DB
  **Key Points:**
  • Only Leader Recruiters can access
  • Data filtered by company automatically
  • All calculations done server-side
  • Export uses client-side data
end note

@enduml





