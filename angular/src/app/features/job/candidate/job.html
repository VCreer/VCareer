<div class="job-page">
  <!-- ============================================ -->
  <!-- ‚úÖ TOP SEARCH BAR - Using FilterBarComponent -->
  <!-- ============================================ -->
  <div class="search-header">
    <div class="search-container">
      <h1 class="page-title">{{ translate('job_page.title') }}</h1>

      <!-- ‚úÖ FilterBarComponent (Category + Search + Location + Button) -->
      <app-filter-bar
        [categories]="categories"
        [provinces]="provinces"
        [selectedCategoryIds]="selectedCategoryIds"
        [selectedProvinceIds]="selectedProvinceIds"
        [selectedDistrictIds]="selectedDistrictIds"
        (categorySelected)="onCategorySelected($event)"
        (locationSelected)="onLocationSelected($event)"
      >
        <!-- Search Input -->
        <input
          search-input
          type="text"
          class="main-search-input"
          placeholder="{{ translate('job_page.position_placeholder') }}"
          [(ngModel)]="searchKeyword"
        />

        <!-- Search Button -->
        <button
          search-button
          class="main-search-btn"
          (click)="onMainSearch({ keyword: searchKeyword })"
        >
          <i class="search-icon">üîç</i>
          {{ translate('job_page.search_button') }}
        </button>
      </app-filter-bar>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- MAIN CONTENT: Filter + Job List + Detail -->
  <!-- ============================================ -->
  <div class="main-content" [class.show-detail-job]="selectedJob">
    <!-- Left Column - Filter (Hide when showing detail) -->
    <div class="filter-column" *ngIf="!selectedJob">
      <app-job-filter (filterChange)="onFilterChange($event)"></app-job-filter>

      <!-- Clear Filters Button -->
      <button class="clear-filters-btn" (click)="onClearFilters()">
        {{ translate('job_filter.clear_filters') }}
      </button>
    </div>

    <!-- Middle Column - Job List -->
    <div class="job-list-column">
      <!-- ‚úÖ Loading State -->
      <div *ngIf="isSearching" class="loading-state">
        <p>ƒêang t√¨m ki·∫øm vi·ªác l√†m...</p>
      </div>

      <!-- ‚úÖ Job List -->
      <div *ngIf="!isSearching">
        <!-- Result Count -->
        <div class="result-header" *ngIf="totalCount > 0">
          <p>T√¨m th·∫•y <strong>{{ totalCount }}</strong> vi·ªác l√†m</p>
        </div>

        <!-- No Results -->
        <div class="no-results" *ngIf="totalCount === 0">
          <p>Kh√¥ng t√¨m th·∫•y vi·ªác l√†m ph√π h·ª£p</p>
        </div>

        <!-- ‚úÖ JobListComponent with API data -->
        <app-job-list
          [jobs]="jobs"
          [totalCount]="totalCount"
          [isLoading]="isSearching"
          [selectedJobId]="selectedJob?.id"
          (quickView)="onQuickView($event)"
          (jobClick)="onJobClick($event)"
          (jobHidden)="onJobHidden()"
        ></app-job-list>
      </div>
    </div>

    <!-- Right Column - Job Detail -->
    <div class="job-detail-column" *ngIf="selectedJob">
      <app-job-list-detail
        [selectedJob]="selectedJob"
        (closeDetail)="onCloseDetail()"
        (viewDetail)="onViewDetail($event)"
        (applyJob)="onApply($event)"
      ></app-job-list-detail>
    </div>
  </div>
</div>
