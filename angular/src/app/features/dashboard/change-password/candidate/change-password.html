<div class="change-password-page">
  <div class="password-layout">
    <!-- Left Panel - Change Password Form -->
    <div class="left-panel">
      <div class="form-wrapper">
        <h1 class="page-title">Thay đổi mật khẩu đăng nhập</h1>

        <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()" class="change-password-form">
        <!-- Email đăng nhập (read-only) -->
        <div class="form-group email-group">
          <label class="form-label">
            Email đăng nhập
          </label>
          <input 
            type="email" 
            class="form-input email-input" 
            [value]="currentUserEmail"
            readonly
            disabled
          />
        </div>

        <!-- Mật khẩu hiện tại -->
        <div class="form-group">
          <app-password-field
            formControlName="currentPassword"
            [label]="'Mật khẩu hiện tại'"
            [placeholder]="'Nhập mật khẩu hiện tại'"
            [error]="getFieldError('currentPassword')"
            [required]="true">
          </app-password-field>
        </div>

        <!-- Mật khẩu mới -->
        <div class="form-group">
          <app-password-field
            formControlName="newPassword"
            [label]="'Mật khẩu mới'"
            [placeholder]="'Nhập mật khẩu mới'"
            [error]="getFieldError('newPassword')"
            [required]="true">
          </app-password-field>
        </div>

        <!-- Nhập lại mật khẩu mới -->
        <div class="form-group">
          <app-password-field
            formControlName="confirmPassword"
            [label]="'Nhập lại mật khẩu mới'"
            [placeholder]="'Nhập lại mật khẩu mới'"
            [error]="getFieldError('confirmPassword')"
            [required]="true">
          </app-password-field>
        </div>

        <!-- Submit Button -->
        <div class="form-actions">
          <app-button
            [type]="'submit'"
            [disabled]="isLoading || changePasswordForm.invalid"
            [loading]="isLoading"
            class="save-button">
            Lưu
          </app-button>
        </div>
      </form>
      </div>
    </div>

    <!-- Right Sidebar - User Card and Contact Section -->
    <div class="right-sidebar">
      <!-- User Profile Card -->
      <div class="user-card">
        <div class="user-info">
          <h3 class="welcome-text">Chào bạn trở lại, {{ userFullName }}</h3>
          <div class="verified-status">
            <span class="verified-text">Tài khoản đã xác thực</span>
          </div>
          <button class="upgrade-button">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M7 17L17 7M17 7H7M17 7V17"></path>
            </svg>
            Nâng cấp tài khoản
          </button>

          <!-- Toggle Buttons -->
          <div class="toggle-settings">
            <!-- Toggle 1: Đang Tắt tìm việc -->
            <div class="toggle-item">
              <label class="toggle-switch">
                <input type="checkbox" [checked]="jobSearchEnabled" (change)="onToggleJobSearch()" name="jobSearchEnabled">
                <span class="slider"></span>
              </label>
              <div class="toggle-content">
                <span class="toggle-label" [class.active]="jobSearchEnabled" [class.inactive]="!jobSearchEnabled">
                  {{ jobSearchEnabled ? 'Đang Bật tìm việc' : 'Đang Tắt tìm việc' }}
                </span>
                <p class="toggle-description">
                  Bật tìm việc giúp hồ sơ của bạn nổi bật hơn và được chú ý nhiều hơn trong danh sách tìm kiếm của NTD.
                </p>
              </div>
            </div>

            <!-- Toggle 2: Cho phép NTD tìm kiếm hồ sơ -->
            <div class="toggle-item">
              <label class="toggle-switch">
                <input type="checkbox" [(ngModel)]="allowRecruiterSearch" name="allowRecruiterSearch" [checked]="allowRecruiterSearch">
                <span class="slider"></span>
              </label>
              <div class="toggle-content">
                <span class="toggle-label" [class.active]="allowRecruiterSearch">
                  Cho phép NTD tìm kiếm hồ sơ
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Contact Information Section -->
      <div class="contact-section">
        <h4 class="contact-title">Khi có cơ hội việc làm phù hợp, NTD sẽ liên hệ và trao đổi với bạn qua:</h4>
        <div class="contact-options">
          <div class="contact-option">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
              <polyline points="22,6 12,13 2,6"></polyline>
            </svg>
            <span>Email và Số điện thoại của bạn</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Enable Job Search Modal -->
  <app-enable-job-search-modal
    [show]="showEnableJobSearchModal"
    (close)="onCloseEnableJobSearchModal()"
    (enableJobSearch)="onEnableJobSearch($event)">
  </app-enable-job-search-modal>

  <!-- Toast Notification -->
  <app-toast-notification
    [show]="showToast"
    [message]="toastMessage"
    [type]="toastType"
    (close)="onToastClose()">
  </app-toast-notification>
</div>

