<div class="vnpay-modal-overlay" *ngIf="show" (click)="onClose()">
  <div class="vnpay-modal" (click)="$event.stopPropagation()">
    <div class="vnpay-modal-header">
      <h2 class="modal-title">Thanh toán dịch vụ</h2>
      <button type="button" class="close-btn" (click)="onClose()">
        <i class="fa fa-times"></i>
      </button>
    </div>

    <div class="vnpay-modal-content">
      <!-- Payment Info Section -->
      <div class="payment-info-section" *ngIf="paymentInfo">
        <h3 class="section-title">Thông tin thanh toán</h3>
        
        <div class="payment-details">
          <div class="detail-row" *ngIf="paymentInfo.orderId">
            <span class="detail-label">Mã đơn hàng:</span>
            <span class="detail-value">{{ paymentInfo.orderId }}</span>
          </div>
          
          <div class="detail-row" *ngIf="paymentInfo.services && paymentInfo.services.length > 0">
            <span class="detail-label">Dịch vụ:</span>
            <div class="services-list">
              <div class="service-item" *ngFor="let service of paymentInfo.services">
                <span class="service-name">{{ service.name }}</span>
                <span class="service-quantity">x{{ service.quantity }}</span>
                <span class="service-price">{{ formatCurrency(service.price * service.quantity) }} VND</span>
              </div>
            </div>
          </div>
          
          <div class="detail-row total-row">
            <span class="detail-label">Tổng tiền thanh toán:</span>
            <span class="detail-value total-amount">{{ formatCurrency(paymentInfo.totalAmount) }} VND</span>
          </div>
        </div>
      </div>

      <!-- QR Code Section -->
      <div class="qr-code-section">
        <h3 class="section-title">Quét mã QR để thanh toán</h3>
        <div class="qr-code-placeholder">
          <div class="qr-code-pattern">
            <svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
              <rect width="200" height="200" fill="white"/>
              <rect x="20" y="20" width="40" height="40" fill="black"/>
              <rect x="25" y="25" width="30" height="30" fill="white"/>
              <rect x="30" y="30" width="20" height="20" fill="black"/>
              
              <rect x="140" y="20" width="40" height="40" fill="black"/>
              <rect x="145" y="25" width="30" height="30" fill="white"/>
              <rect x="150" y="30" width="20" height="20" fill="black"/>
              
              <rect x="20" y="140" width="40" height="40" fill="black"/>
              <rect x="25" y="145" width="30" height="30" fill="white"/>
              <rect x="30" y="150" width="20" height="20" fill="black"/>
              <rect x="70" y="20" width="8" height="8" fill="black"/>
              <rect x="85" y="20" width="8" height="8" fill="black"/>
              <rect x="100" y="20" width="8" height="8" fill="black"/>
              <rect x="115" y="20" width="8" height="8" fill="black"/>
              <rect x="20" y="70" width="8" height="8" fill="black"/>
              <rect x="35" y="70" width="8" height="8" fill="black"/>
              <rect x="50" y="70" width="8" height="8" fill="black"/>
              <rect x="70" y="35" width="8" height="8" fill="black"/>
              <rect x="85" y="35" width="8" height="8" fill="black"/>
              <rect x="100" y="50" width="8" height="8" fill="black"/>
              <rect x="115" y="50" width="8" height="8" fill="black"/>
              <rect x="130" y="50" width="8" height="8" fill="black"/>
              <rect x="70" y="70" width="8" height="8" fill="black"/>
              <rect x="85" y="70" width="8" height="8" fill="black"/>
              <rect x="100" y="70" width="8" height="8" fill="black"/>
              <rect x="115" y="70" width="8" height="8" fill="black"/>
              <rect x="130" y="70" width="8" height="8" fill="black"/>
              <rect x="145" y="70" width="8" height="8" fill="black"/>
              <rect x="160" y="70" width="8" height="8" fill="black"/>
              <rect x="175" y="70" width="8" height="8" fill="black"/>
              <rect x="70" y="85" width="8" height="8" fill="black"/>
              <rect x="100" y="85" width="8" height="8" fill="black"/>
              <rect x="130" y="85" width="8" height="8" fill="black"/>
              <rect x="160" y="85" width="8" height="8" fill="black"/>
              <rect x="20" y="100" width="8" height="8" fill="black"/>
              <rect x="35" y="100" width="8" height="8" fill="black"/>
              <rect x="50" y="100" width="8" height="8" fill="black"/>
              <rect x="70" y="100" width="8" height="8" fill="black"/>
              <rect x="85" y="100" width="8" height="8" fill="black"/>
              <rect x="115" y="100" width="8" height="8" fill="black"/>
              <rect x="130" y="100" width="8" height="8" fill="black"/>
              <rect x="145" y="100" width="8" height="8" fill="black"/>
              <rect x="160" y="100" width="8" height="8" fill="black"/>
              <rect x="175" y="100" width="8" height="8" fill="black"/>
              <rect x="20" y="115" width="8" height="8" fill="black"/>
              <rect x="50" y="115" width="8" height="8" fill="black"/>
              <rect x="70" y="115" width="8" height="8" fill="black"/>
              <rect x="100" y="115" width="8" height="8" fill="black"/>
              <rect x="130" y="115" width="8" height="8" fill="black"/>
              <rect x="160" y="115" width="8" height="8" fill="black"/>
              <rect x="20" y="130" width="8" height="8" fill="black"/>
              <rect x="35" y="130" width="8" height="8" fill="black"/>
              <rect x="50" y="130" width="8" height="8" fill="black"/>
              <rect x="70" y="130" width="8" height="8" fill="black"/>
              <rect x="85" y="130" width="8" height="8" fill="black"/>
              <rect x="100" y="130" width="8" height="8" fill="black"/>
              <rect x="115" y="130" width="8" height="8" fill="black"/>
              <rect x="130" y="130" width="8" height="8" fill="black"/>
              <rect x="145" y="130" width="8" height="8" fill="black"/>
              <rect x="160" y="130" width="8" height="8" fill="black"/>
              <rect x="175" y="130" width="8" height="8" fill="black"/>
              <rect x="70" y="145" width="8" height="8" fill="black"/>
              <rect x="85" y="145" width="8" height="8" fill="black"/>
              <rect x="100" y="145" width="8" height="8" fill="black"/>
              <rect x="115" y="145" width="8" height="8" fill="black"/>
              <rect x="130" y="145" width="8" height="8" fill="black"/>
              <rect x="145" y="145" width="8" height="8" fill="black"/>
              <rect x="160" y="145" width="8" height="8" fill="black"/>
              <rect x="175" y="145" width="8" height="8" fill="black"/>
              <rect x="70" y="160" width="8" height="8" fill="black"/>
              <rect x="100" y="160" width="8" height="8" fill="black"/>
              <rect x="130" y="160" width="8" height="8" fill="black"/>
              <rect x="160" y="160" width="8" height="8" fill="black"/>
              <rect x="70" y="175" width="8" height="8" fill="black"/>
              <rect x="85" y="175" width="8" height="8" fill="black"/>
              <rect x="100" y="175" width="8" height="8" fill="black"/>
              <rect x="115" y="175" width="8" height="8" fill="black"/>
              <rect x="130" y="175" width="8" height="8" fill="black"/>
              <rect x="145" y="175" width="8" height="8" fill="black"/>
              <rect x="160" y="175" width="8" height="8" fill="black"/>
              <rect x="175" y="175" width="8" height="8" fill="black"/>
            </svg>
          </div>
        </div>
        
        <div class="countdown-section">
          <p class="countdown-text">
            Mã QR sẽ tự động hết hạn sau 
            <span class="countdown-number">{{ countdown }}</span> 
            giây
          </p>
        </div>
      </div>
    </div>

    <div class="vnpay-modal-footer">
      <button type="button" class="decline-btn" (click)="onDecline()">
        Hủy
      </button>
    </div>
  </div>
</div>
