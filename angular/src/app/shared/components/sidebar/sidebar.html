<!-- Sidebar Overlay -->
<div class="sidebar-overlay" [class.show]="show" (click)="onClose()"></div>

<!-- Sidebar -->
<div class="sidebar" [class.show]="show">
  <!-- User Profile Section -->
  <div class="sidebar-profile">
    <div class="profile-avatar">
      <i class="fa fa-user"></i>
    </div>
    <div class="profile-info">
      <div class="profile-name">{{ userName }}</div>
      <div class="profile-role">{{ userRole }}</div>
      <div class="profile-verification" [class.not-verified]="!isVerified" *ngIf="!isEmployeeRoute">
        <span>{{ translate('sidebar.verification') }}: {{ verificationLevel }}</span>
        <i class="fa fa-question-circle verification-info-icon"></i>
        <span class="verification-badge" *ngIf="!isVerified">{{ translate('sidebar.not_verified') }}</span>
      </div>
    </div>
  </div>

  <!-- Sidebar Navigation -->
  <nav class="sidebar-nav">
    <ul class="sidebar-nav-list">
      <!-- Employee Menu -->
      <ng-container *ngIf="isEmployeeRoute">
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/employee/home')" class="sidebar-link" [class.active]="isActive('/employee/home')">
            <i class="fa fa-home sidebar-icon"></i>
            <span class="sidebar-link-text">Trang chủ</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/employee/manage-recruitment-information')" class="sidebar-link" [class.active]="isActive('/employee/manage-recruitment-information')">
            <i class="fa fa-briefcase sidebar-icon"></i>
            <span class="sidebar-link-text">Quản lý tin tuyển dụng</span>
          </a>
        </li>
        <li class="sidebar-nav-item sidebar-nav-item-dropdown" [class.dropdown-open]="showUserManagementDropdown">
          <a (click)="toggleUserManagementDropdown($event)" class="sidebar-link sidebar-link-has-submenu" [class.active]="isUserManagementActive()">
            <i class="fa fa-users sidebar-icon"></i>
            <span class="sidebar-link-text">Quản lí người dùng</span>
            <i class="fa fa-chevron-down sidebar-chevron" [class.rotated]="showUserManagementDropdown"></i>
          </a>
          <ul class="sidebar-submenu" [class.show]="showUserManagementDropdown">
            <li class="sidebar-submenu-item">
              <a (click)="navigateToUserManagement('/employee/user-management/recruiter', $event)" class="sidebar-submenu-link" [class.active]="isActive('/employee/user-management/recruiter')">
                <span class="sidebar-submenu-text">Quản lí tuyển dụng</span>
              </a>
            </li>
            <li class="sidebar-submenu-item">
              <a (click)="navigateToUserManagement('/employee/user-management/candidate', $event)" class="sidebar-submenu-link" [class.active]="isActive('/employee/user-management/candidate')">
                <span class="sidebar-submenu-text">Quản lí ứng viên</span>
              </a>
            </li>
            <li class="sidebar-submenu-item">
              <a (click)="navigateToUserManagement('/employee/user-management/employee', $event)" class="sidebar-submenu-link" [class.active]="isActive('/employee/user-management/employee')">
                <span class="sidebar-submenu-text">Quản lí nhân viên</span>
              </a>
            </li>
          </ul>
        </li>
        <li class="sidebar-nav-item sidebar-nav-item-dropdown" [class.dropdown-open]="showServicePackagesDropdown">
          <a (click)="toggleServicePackagesDropdown($event)" class="sidebar-link sidebar-link-has-submenu" [class.active]="isServicePackagesActive()">
            <i class="fa fa-box sidebar-icon"></i>
            <span class="sidebar-link-text">Quản lí gói dịch vụ</span>
            <i class="fa fa-chevron-down sidebar-chevron" [class.rotated]="showServicePackagesDropdown"></i>
          </a>
          <ul class="sidebar-submenu" [class.show]="showServicePackagesDropdown">
            <li class="sidebar-submenu-item">
              <a (click)="navigateToServicePackages('/employee/manage-service-packages', $event)" class="sidebar-submenu-link" [class.active]="isActive('/employee/manage-service-packages')">
                <span class="sidebar-submenu-text">Quản lí các gói dịch vụ</span>
              </a>
        </li>
            <li class="sidebar-submenu-item">
              <a (click)="navigateToServicePackages('/employee/manage-sub-service-packages', $event)" class="sidebar-submenu-link" [class.active]="isActive('/employee/manage-sub-service-packages')">
                <span class="sidebar-submenu-text">Quản lí dịch vụ phụ</span>
              </a>
            </li>
          </ul>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/employee/company-verify')" class="sidebar-link" [class.active]="isActive('/employee/company-verify')">
            <i class="fa fa-building sidebar-icon"></i>
            <span class="sidebar-link-text">Xác thực công ty</span>
          </a>
        </li>
        <li class="sidebar-nav-item sidebar-nav-item-dropdown log-management" [class.dropdown-open]="showLogManagementDropdown">
          <a (click)="toggleLogManagementDropdown($event)" class="sidebar-link sidebar-link-has-submenu" [class.active]="isLogManagementActive()">
            <i class="fa fa-file-alt sidebar-icon"></i>
            <span class="sidebar-link-text">Quản lí log</span>
            <i class="fa fa-chevron-down sidebar-chevron" [class.rotated]="showLogManagementDropdown"></i>
          </a>
          <ul class="sidebar-submenu" [class.show]="showLogManagementDropdown">
            <li class="sidebar-submenu-item">
              <a (click)="navigateToLogManagement('/employee/manage-log/transaction', $event)" class="sidebar-submenu-link" [class.active]="isActive('/employee/manage-log/transaction')">
                <span class="sidebar-submenu-text">Quản lí log giao dịch của tuyển dụng</span>
              </a>
            </li>
            <li class="sidebar-submenu-item">
              <a (click)="navigateToLogManagement('/employee/manage-log/activity', $event)" class="sidebar-submenu-link" [class.active]="isActive('/employee/manage-log/activity')">
                <span class="sidebar-submenu-text">Quản lí log hoạt động của nhân viên</span>
              </a>
            </li>
          </ul>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/employee/category-management')" class="sidebar-link" [class.active]="isActive('/employee/category-management')">
            <i class="fa fa-folder sidebar-icon"></i>
            <span class="sidebar-link-text">Quản lí danh mục</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/employee/manage-role')" class="sidebar-link" [class.active]="isActive('/employee/manage-role')">
            <i class="fa fa-user-shield sidebar-icon"></i>
            <span class="sidebar-link-text">Quản lí vai trò</span>
          </a>
        </li>
      </ng-container>

      <!-- Recruiter Menu -->
      <ng-container *ngIf="!isEmployeeRoute">
        <!-- First Group -->
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/recruitment-report')" class="sidebar-link" [class.active]="isActive('/recruiter/recruitment-report')">
            <i class="fa fa-chart-line sidebar-icon"></i>
            <span class="sidebar-link-text">Báo cáo tuyển dụng</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/job-posting')" class="sidebar-link">
            <i class="fa fa-edit sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.insights') }}</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/hr-staff-management')" class="sidebar-link" [class.active]="isActive('/recruiter/hr-staff-management')">
            <i class="fa fa-users-cog sidebar-icon"></i>
            <span class="sidebar-link-text">Quản lí nhân sự</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/my-services')" class="sidebar-link" [class.active]="isActive('/recruiter/my-services')">
            <i class="fa-solid fa-wand-magic sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.redeem_gifts') }}</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/toppy-ai')" class="sidebar-link">
            <i class="fa fa-robot sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.toppy_ai') }}</span>
            <span class="sidebar-badge">1</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/suggested-cv')" class="sidebar-link">
            <i class="fa fa-thumbs-up sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.suggested_cv') }}</span>
          </a>
        </li>

        <!-- Divider -->
        <li class="sidebar-nav-item sidebar-nav-divider"></li>

        <!-- Second Group -->
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/recruitment-campaign')" class="sidebar-link" [class.active]="isActive('/recruiter/recruitment-campaign')">
            <i class="fa fa-briefcase sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.recruitment_campaigns') }}</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/post-job')" class="sidebar-link">
            <i class="fa fa-file-alt sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.job_postings') }}</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/cv-management')" class="sidebar-link sidebar-link-has-submenu" [class.active]="isActive('/recruiter/cv-management')">
            <i class="fa fa-user-circle sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.cv_management') }}</span>
          </a>
        </li>

        <!-- Divider -->
        <li class="sidebar-nav-item sidebar-nav-divider"></li>

        <!-- Third Group -->
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/buy-services')" class="sidebar-link" [class.active]="isActive('/recruiter/buy-services')">
            <i class="fa fa-shopping-cart sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.buy_services') }}</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/recruiter-setting')" class="sidebar-link" [class.active]="isActive('/recruiter/recruiter-setting')">
            <i class="fa fa-cog sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.account_settings') }}</span>
          </a>
        </li>
        <li class="sidebar-nav-item">
          <a (click)="navigateTo('/recruiter/activity-history')" class="sidebar-link">
            <i class="fa fa-history sidebar-icon"></i>
            <span class="sidebar-link-text">{{ translate('sidebar.activity_history') }}</span>
          </a>
        </li>
      </ng-container>
    </ul>
  </nav>
</div>
