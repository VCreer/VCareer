<div class="profile-avatar" [class]="'size-' + size">
  <div class="avatar-container">
    <div class="avatar-image" [style.width]="avatarSize" [style.height]="avatarSize">
      <img 
        *ngIf="avatarUrl && !isUploading" 
        [src]="avatarUrl" 
        [alt]="name + ' avatar'"
        class="avatar-img"
      >
      <div 
        *ngIf="!avatarUrl || isUploading" 
        class="avatar-placeholder"
        [style.width]="avatarSize" 
        [style.height]="avatarSize"
      >
        <span class="avatar-initials">{{ initials }}</span>
      </div>
      
      <div *ngIf="isUploading" class="upload-overlay">
        <div class="loading-spinner"></div>
      </div>
    </div>
    
    <div class="avatar-actions" *ngIf="showEditButton">
      <label class="avatar-upload-btn" [class.uploading]="isUploading">
        <input 
          type="file" 
          accept="image/*" 
          (change)="onFileSelected($event)"
          [disabled]="isUploading"
          hidden
        >
        <svg *ngIf="!isUploading" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/>
          <circle cx="12" cy="13" r="3"/>
        </svg>
        <div *ngIf="isUploading" class="loading-spinner small"></div>
        <span>{{ isUploading ? 'Đang tải...' : 'Thay đổi' }}</span>
      </label>
      
      <button 
        *ngIf="avatarUrl && !isUploading" 
        class="avatar-remove-btn"
        (click)="onRemoveClick()"
        type="button"
      >
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 6h18M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
        </svg>
        Xóa
      </button>
    </div>
  </div>
  
  <div class="avatar-info" *ngIf="name">
    <h3 class="avatar-name">{{ name }}</h3>
  </div>
</div>
